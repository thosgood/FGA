# Formal geometry and algebraic geometry [FGA 2] {#FGA-2}

\providecommand{\scr}[1]{{\mathscr{#1}}}
\renewcommand{\cal}[1]{{\mathcal{#1}}}
\renewcommand{\frak}[1]{{\mathfrak{#1}}}
\renewcommand{\geq}{\geqslant}
\renewcommand{\leq}{\leqslant}

<!-- Shortcuts -->

\providecommand{\PP}{\mathbb{P}}
\providecommand{\ZZ}{\mathbb{Z}}
\providecommand{\kres}{\mathfrak{K}}
\providecommand{\red}{\mathrm{red}}

\providecommand{\Spec}{\operatorname{Spec}}
\providecommand{\supp}{\operatorname{supp}}
\providecommand{\RR}{\operatorname{R}}
\providecommand{\Hom}{\operatorname{Hom}}
\providecommand{\Aut}{\operatorname{Aut}}
\providecommand{\shHom}{\underline{\Hom}}
\providecommand{\shAut}{\underline{\Aut}}
\providecommand{\gr}{\underline{gr}}

<!-- Content -->

::: {.original-citation}
Grothendieck, A.
"Géométrie formelle et géométrie algébrique".
_Séminaire Bourbaki_ **11** (1958--59), Talk no. 182.
:::

\oldpage{C-03}

The substance of [§1](#FGA-2-section-1) to [§5](#FGA-2-section-5) is contained in the published part of EGA III; that of [§6](#FGA-2-section-6) and [§7](#FGA-2-section-7) is contained in SGA III.
For the study of the fundamental group, see SGA V, IX, X, and XI, as well as SGA 1962 (talks X, XII, and XIII) for the Lefschetz-type theorems and numerous open questions.
Only the theory of moderately ramified coverings (cf. [Theorem 14](#FGA-2-theorem-14)) has not yet been the subject of a dedicated talk.
The [corollary to Theorem 14](#FGA-2-theorem-14-corollary), which completely determines Galois coverings of order coprime to the characteristic of an algebraic curve over an algebraically closed field, has been used in an essential manner on three separate occasions:

1. in the proof by Igusa of the Picard inequality for non-singular projective surfaces in arbitrary characteristic;

2. in the study (developed independently by Ogg and Šafarevič) of the group of homogeneous principal bundles over an abelian variety defined over a function field in one variable, in arbitrary characteristic; and

3. in the recent proof, by Artin, of certain key theorems concerning the "Weil cohomology" of algebraic varieties.


## Schemes {#FGA-2-section-1}

\oldpage{182-01}

We know that an affine algebraic space defined over a field $k$ is essentially determined by its affine algebra $A$ (the ring of regular functions defined over $k$), and the morphisms $X\to Y$ of algebraic spaces correspond bijectively to homomorphisms $A(Y)\to A(X)$ of $k$-algebras.
The affine algebra corresponding to an algebraic space is a $k$-algebra of finite type, and, from the "classical" point of view, it has no nilpotent elements;
conversely, every such algebra is obtained as the affine algebra of an algebraic space defined over $k$.
There is thus a known dictionary that allows us to interpret situations concerning affine algebraic spaces in terms of commutative algebra.
We have long since noted that we thus obtain more general statements, since it was not generally necessary to suppose that the rings in play were of the form just described, with the Noetherian hypothesis being sufficient the most of the time.
In particular, whether or not a base field were given, it was not necessary to exclude the case where these rings contained nilpotent elements.
Up until now, geometers had refused to take into account this information, and were obstinate in restricting to the consideration of affine algebra without nilpotent elements, i.e. algebraic spaces in whose structure sheaves there are no nilpotent elements (and even, most of the time, "absolutely irreducible" algebraic spaces).
The speaker thinks that this state of mind has been a serious obstacle to the development of truly natural methods in algebraic geometry.

Let $A$ be a commutative ring.
It is well known that the set $X=\Spec(A)$ of prime ideals of $A$ is endowed with a natural topology: the "_Zariski topology_", or the spectral topology.
Also, there is a sheaf of commutative rings $\scr{O}_X$ on $X$, whose fibre at $\frak{p}\in X$ is the localised ring $A_\frak{p}$, and whose ring of sections can be identified with $A$.
Thus $X$ becomes a _ringed space_, and is called the _prime spectrum_ of $A$.
A ring homomorphism $f\colon A\to B$ defines a morphism $f'\colon\Spec(B)\to\Spec(A)$ of ringed spaces, with the underlying map of sets being exactly $\frak{p}\mapsto f^{-1}(\frak{p})$.
The homomorphisms $\Spec(B)\to\Spec(A)$ of ringed spaces obtained in this manner are exactly those for which the homomorphisms $\scr{O}_x\to\scr{O}_y$ (where $x=f'(y)$) are local (i.e. the inverse image of a maximal ideal is a maximal ideal).

\oldpage{182-02}

We define an _affine scheme_ to be a ringed space that is isomorphic to some $\Spec(A)$, and a _prescheme_ to be a locally-affine ringed space, i.e. such that every point has an open neighbourhood that is an affine scheme for the induced structure.
We define, in an evident way, _morphisms_ of preschemes;
locally, they correspond to ring homomorphisms.

When we fix a prescheme $S$, and we look at morphisms $X\to S$ of preschemes, then $S$ plays the role of a base field or base ring (or, even better, of a base space in a fibration).
We then say that $X$ is an _$S$-prescheme_;
if $S=\Spec(A)$, then this also implies that $\scr{O}_X$ is a sheaf of _$A$-algebras_.
So every prescheme can be regarded in a unique way as a $\mathbb{Z}$-prescheme.
Of course, $S$-preschemes form a category, and we can further show that, in this category, the product of two objects $X$ and $Y$ always exists;
it is denoted by $X\times_S Y$.
This notion of product allows us to define the _change of base_ of an $S$-prescheme, corresponding to a morphism $S'\to S$, since $X\times_S S'$ can be considered as an $S'$-prescheme.

We say that $X$ is _separated_ over $S$ if the diagonal of $X\times_S X$ is closed.
We define a _scheme_ to be a prescheme that is separated over $\mathbb{Z}$;
it is then separated over anything.
For simplicity, we will now only speak of schemes, which we will further suppose to be _Noetherian_, i.e. finite unions of affine opens that are spectra of Noetherian rings.
We say that $X$ is _of finite type_ over $S$ if, for every affine open subset $U$ of $S$, its inverse image in $X$ is a finite union of affine opens whose rings are algebras of finite type over the ring of $U$.
It is such $S$-schemes that lend themselves to a properly geometry study.
In particular, for every $s\in S$, the fibre $f^{-1}(s)$ of $X$ over $s$ is an algebraic scheme over the residue field $k(s)$ of the local ring $\scr{O}_s$ of $s$ in $S$.
Thus $X$ can be, to a certain extent, considered as a family of "algebraic spaces" $f^{-1}(s)$, with the parameter $s$ running over $S$ (i.e., from the local point of view, the set of prime ideals of a given ring).
Of course, the $k(s)$ can have different characteristics.
If $S=\Spec(k)$, where $k$ is a field, then we essentially recover the usual notion of "algebraic space", with the only difference being that now the structure sheaf can have nilpotent elements.

\oldpage{182-03}

Inspired by well-known ideas, we can define the notion of a _projective morphism_, and, more generally, of a _proper morphism_.
Such a morphism is of finite type, and further sends closed subsets to closed subsets, and retains this property under an arbitrary change of base.

With $X$ being a (Noetherian, as always) scheme, the sheaf $\scr{O}_X$ is a _coherent sheaf of rings_ in the sense of [@2-2].
The coherent sheaves of modules on $X$ are thus also the sheaves which are locally isomorphic to a cokernel of some morphism $\scr{O}_X^m\to\scr{O}_X^n$.


## Formal schemes {#FGA-2-section-2}

Let $X$ be a scheme, and $X'$ a closed subset of $X$.
Then there exists a coherent subsheaf $\scr{J}$ of $\scr{O}_X$ such that $X'=\supp\scr{O}_X/\scr{J}$ (and there even exists a largest such one).
Endowing $X'$ with the sheaf $\scr{O}_X/\scr{J}$ makes $X'$ a scheme, denoted $X_0$;
such a scheme is called a _closed subscheme of $X$_.
We can also, for any $n$, consider $X'$ endowed with $\scr{O}_X/\scr{J}^{n+1}$, denoted $X_n$, which is a closed subprescheme of $X$ whose underlying set is again $X'$, but with a different structure sheaf, namely $\scr{O}_{X_n}=\scr{O}_X/\scr{J}^{n+1}$.
Clearly the $\scr{O}_{X_n}$ form a projective system of sheaves of rings on $X$, whose projective limit $\overline{\scr{O}_X}$ is called the _formal completion of $\scr{O}_X$ along $X'$_.
Endowed with this sheaf of rings, $X'$ is called the _formal completion of $X$ along $X'$_, and is thus a ringed space, but not a scheme in general.
For every coherent sheaf $\scr{F}$ on $X$, we can similarly consider the formal completion $\overline{\scr{F}}=\varprojlim_n\scr{F}_n$ of $\scr{F}$ along $X'$ (where $\scr{F}_n=\scr{F}\otimes_{\scr{O}_X}\scr{O}_X/\scr{J}^{n+1}$), which is a sheaf of modules on $\overline{X}$.
Its sections are called _formal sections of $\scr{F}$ along $X$_, and can be identified with elements of $\varprojlim_n\Gamma(X',\scr{F}_n)$.
For $\scr{F}=\scr{O}_X$, we recover the "holomorphic functions" of $X$ along $X'$, in the sense of Zariski (whose terminology we will not follow, due to its interferences with classical terminology).

We define a _formal scheme_ (implicitly assumed to be Noetherian) to be a topological space $\frak{X}$ endowed with a sheaf of topological rings $\scr{O}_{\frak{X}}$ satisfying the following condition:
there is an isomorphism of sheaves of topological rings $\scr{O}_{\frak{X}}=\varprojlim_n\scr{O}_n$, where the $\scr{O}_n$ form a projective system of sheaves of rings on $\frak{X}$, with each one making $\frak{X}$ into a scheme $\frak{X}_n$, and such that, for $m\geq n$, the homomorphism $\scr{O}_m\to\scr{O}_n$ is surjective and has $\scr{J}_m^{n+1}$ as its kernel, where $\scr{J}_m$ is the kernel of $\scr{O}_m\to\scr{O}_0$.
We will show that $\scr{O}_{\frak{X}}$ is a _coherent_ sheaf of _local Noetherian_ rings.

\oldpage{182-04}

By the definitions, a formal completion $\overline{X}$ as above is a formal scheme, and, conversely, every formal scheme is _locally_ of this type.
In fact, the data of a formal _affine_ scheme (i.e. such that $\frak{X}_0$ is affine, which implies that all the $\frak{X}_n$ are affine) is equivalent to the data of a separated complete $\scr{J}$-adic Noetherian topological ring.

The usual definitions (morphism, morphism of finite type, proper morphism, etc.) for ordinary schemes generalise without problem to formal schemes.


## The three fundamental theorems {#FGA-2-section-3}

Let $f\colon X\to Y$ be a proper morphism of schemes (Noetherian, as always), and let $Y'$ be a closed subset of $Y'$, with $X'$ its inverse image in $X$, and consider the corresponding formal completions $\overline{Y}$ and $\overline{X}$.
Then $f$ induces a morphism $\overline{f}\colon\overline{X}\to\overline{Y}$ of formal schemes, which is also proper.
Let $\scr{F}$ be a coherent sheaf on $X$, then $\overline{\scr{F}}$ is a coherent sheaf on $\overline{X}$.
In [Theorem 1](#FGA-2-theorem-1), we forget $X$, $Y$, and $\scr{F}$, and consider only the proper morphism $\overline{f}$ of formal schemes, along with the coherent sheaf $\overline{\scr{F}}$ on $\overline{X}$.
(However, the speaker has only written the complete proof in the case where we start with some $X$, $Y$, $f$, and $F$).

::: {.itenv #FGA-2-theorem-1 title="Theorem 1" latex="{Theorem 1}"}
_Finiteness theorem._ ---

i. The $\RR^q\overline{f}_*(\overline{\scr{F}})$ are coherent sheaves on $\overline{Y}$.

ii. The natural homomorphisms
    $$
        \RR^q\overline{f}_*(\overline{\scr{F}}) \to \varprojlim_n\RR^q (f_n)_*(\scr{F}_n)
    $$
    are isomorphisms.
:::

In this statement, we suppose that we already have some coherent subsheaf $\scr{J}$ of $\scr{O}_Y$ that defines $Y'$, whence, by taking the inverse image, a coherent subsheaf of $\scr{O}_X$ that defines $X'$, whence, by definition, $\scr{F}_n$, $X_n$, $Y_n$, and $f_n\colon X_n\to Y_n$ as in [§2](#FGA-2-section-2).
The minor changes that need to be made to the notation in the explanation if we started with an arbitrary proper morphism between two formal schemes are evident.

[Theorem 1](#FGA-2-theorem-1) deals only with "formal cohomology";
the following theorem relates it with "algebraic cohomology", and resembles a well-known theorem of Serre [@2-4] on the comparison between algebraic cohomology and analytic cohomology.

\oldpage{182-05}

::: {.itenv #FGA-2-theorem-2 title="Theorem 2" latex="{Theorem 2}"}
_First comparison theorem._ ---
The $\RR^q f_*(\scr{F})$ are coherent sheaves on $Y$ (which is a particular case of [Theorem 1](#FGA-2-theorem-1)), and the natural homomorphisms
$$
    \overline{\RR^q f_*(\scr{F})} \to \varprojlim_n \RR^q (f_n)_*(\scr{F}_n)
$$
are isomorphisms.
:::

::: {.itenv #FGA-2-theorem-2-corollary-1 title="Corollary 1" latex="{Corollary 1}"}
There are canonical isomorphisms $\overline{\RR^q f_*(\scr{F})} = \RR^q\overline{f}_*(\overline{\scr{F}})$.
:::

This corollary is, for $q=0$, a generalisation of Zariski's "fundamental theorem of holomorphic functions", from which we will deduce a generalisation of Zariski's "connection theorem".
We also note that, while [Theorem 1](#FGA-2-theorem-1) (ii) is trivial for $q=$, this is not at all the case for [Theorem 2](#FGA-2-theorem-2) nor for its equivalent formulation ([Corollary 1](#FGA-2-theorem-2-corollary-1)).
In fact, the proof proceeds by decreasing induction on $q$ (being trivial for large $q$, since then both sides of the equation are zero), and the case $q=0$ thus appears as the last induction step, and so could be called the "most difficult" case.

::: {.itenv #FGA-2-theorem-2-corollary-2 title="Corollary 2" latex="{Corollary 2}"}
Let $Y=\Spec(A)$, and let $Y'$ be defined by an ideal $\scr{J}$ of $A$.
Then, for every coherent sheaf $\scr{F}$ on $X$, the $H^q(X,\scr{F})$ are $A$-modules of finite type, whose $\scr{J}$-adic completions are the $H^q(\overline{X},\overline{\scr{F}})$.
:::

Finally, applying this corollary to $H=\shHom_{\scr{O}_X}(\scr{F},\scr{G})$, we obtain:

::: {.itenv #FGA-2-theorem-2-corollary-3 title="Corollary 3" latex="{Corollary 3}"}
Let $Y=\Spec(A)$, and let $Y'$ be defined by an ideal $\scr{J}$ of $A$.
Let $\scr{F}$ and $\scr{G}$ be coherent sheaves on $X$.
Then $\Hom(\scr{F},\scr{G})$ is an $A$-module of finite type, whose $\scr{J}$-adic completion can be identified with $\Hom(\overline{\scr{F}},\overline{\scr{G}})$.
:::

Of course, the natural map $\Hom(\scr{F},\scr{G})\to\Hom(\overline{\scr{F}},\overline{\scr{G}})$ is that which sends a homomorphism $u\colon\scr{F}\to\scr{G}$ to its extension ``by continuity'' $\overline{u}\colon\overline{\scr{F}}\to\overline{\scr{G}}$ (so that $\overline{\scr{F}}$ becomes a functor in $\scr{F}$).

Now suppose that $A$ is separated and complete for its $\scr{J}$-adic topology.
Then [Corollary 2](#FGA-2-theorem-2-corollary-2) and [Corollary 3](#FGA-2-theorem-2-corollary-3) above give:
$$
  \begin{aligned}
    H^q(X,\scr{F}) &= H^q(\overline{X},\overline{\scr{F}}),
  \\\Hom(\scr{F},\scr{G}) &= \Hom(\overline{\scr{F}},\overline{\scr{G}}).
  \end{aligned}
$$

\oldpage{182-06}

The latter identity shows that the category of coherent sheaves on $X$ can be identified with a _subcategory_ (with morphisms being the induced morphisms) of the category of coherent sheaves on $\overline{X}$.
In fact, we even have:

::: {.itenv #FGA-2-theorem-3 title="Theorem 3" latex="{Theorem 3}"}
For a sheaf of modules on $\overline{X}$ to be coherent, it is necessary and sufficient for it to be isomorphic to a sheaf of the form $\overline{\scr{F}}$, where $\scr{F}$ is a coherent sheaf on $X$ (determined up to canonical isomorphism, by [Corollary 3 of Theorem 2](#FGA-2-theorem-2-corollary-3)).
[We recall that now $Y=\Spec(A)$, with $A$ being a complete and separated $\scr{J}$-adic Noetherian topological ring].
:::

::: {.itenv #FGA-2-theorem-3-corollary-1 title="Corollary 1" latex="{Corollary 1}"}
The closed subschemes of $X$ are in bijective correspondence with the closed formal subschemes of $\overline{X}$.
:::

Indeed, they correspond to coherent subsheaves of $\scr{O}_X$ (resp. of $\scr{O}_{\overline{X}}$).
Considering the graphs of morphisms as closed subschemes, [Corollary 1](#FGA-2-theorem-3-corollary-1) implies:

::: {.itenv #FGA-2-theorem-3-corollary-2 title="Corollary 2" latex="{Corollary 2}"}
Let $X$ and $Z$ be proper schemes over $A$ (which is a separated complete $\scr{J}$-adic Noetherian ring).
Then the map $g\mapsto\overline{g}$ defines a bijective correspondence between $Y$-morphism from $X$ to $Z$ and $\overline{Y}$-morphisms from $\overline{X}$ to $\overline{Z}$.
:::

In other words, proper algebraic schemes over $A$ give a subcategory (with the morphisms being the induced morphisms) of the category of proper formal schemes over $\overline{Y}$.
We note, however, that _there exist proper formal schemes over $\overline{Y}$ that are not "algebraisable"_, i.e. isomorphic to some $\overline{X}$, where $X$ is proper over $A$ (just as there exist compact complex-analytic varieties that do not come from algebraic varieties defined over the field of complex numbers).
Such formal schemes naturally appear in "module theory".
We note, however, an interesting case where a formal scheme is algebraisable:

::: {.itenv #FGA-2-theorem-4 title="Theorem 4" latex="{Theorem 4}"}
Let $A$ be a complete local Noetherian ring, with residue field $k$, and let $\frak{X}$ be a proper formal scheme over $A$ (endowed with its $\frak{r}(A)$-adic topology).
We suppose that

i. the local rings of $\scr{O}_{\frak{X}}$ are \emph{flat} $A$-modules, or, equivalently, that, if we endow $\scr{O}_{\frak{X}}$ and $A$ with the filtration given by powers of the maximal ideal of $A$, then the associated graded algebras satisfy
    $$
      \gr(\scr{O}_{\frak{X}}) \simeq \gr^0(\scr{O}_{\frak{X}})\otimes_k\gr(A);
    $$

ii. $H^2(\frak{X}_0,\scr{O}_{\frak{X}_0})=0$, where we consider $\frak{X}_0=\frak{X}\otimes_Ak$ as an algebraic scheme over $k$;

iii.  $\frak{X}_0$ is projective.

\oldpage{182-07}

Then, under these conditions, $\frak{X}$ is algebraisable, and, more precisely, is isomorphic to $\overline{X}$, where $X$ is some projective $A$-scheme.
:::

Conditions (ii) and (iii) will be satisfied if, in particular, $\frak{X}_0$ is a _simple curve_ over $k$, and [Theorem 4](#FGA-2-theorem-4) can be applied, in particular, in the "module theory" of curves of a given genus...
We will give here a hint on how to prove [Theorem 4](#FGA-2-theorem-4):
we can show (cf. [Proposition 3](#FGA-2-proposition-3) below) that (i) and (ii) imply that every coherent sheaf on $\frak{X}_0$ that is locally isomorphic to a fundamental sheaf can be obtained by reduction starting from a sheaf of the same nature on $\frak{X}$.
So, starting with an "ample" sheaf on $\frak{X}_0$ (which, by (iii), exists), we lift it to obtain an invertible sheaf on $\frak{X}$, and, using [Theorem 1](#FGA-2-theorem-1), we prove that a multiple of this invertible sheaf defined an immersion of $X$ into the formal completion of a scheme $\PP_A^r$ ("projective type" of dimension $r$ over $A$).

For the proof of [Theorem 1](#FGA-2-theorem-1), [Theorem 2](#FGA-2-theorem-2), and [Theorem 3](#FGA-2-theorem-3), we refer the reader to [@2-1].


